<% if @project.topics.length %>
  <div class="row mt-4">
    <% @project.topics.each do |topic| %>
      <% if topic.id %>
        <div class="col-6 mb-4">
          <div class="card border-info topic">
              <div class="card-header">
                <div class="row">
                  <div class="col mr-auto font-weight-bolder text-dark">
                    <%= topic.title %>
                  </div>
                  <% if @project.is_admin %>
                    <div class="col-auto">
                      <%= link_to edit_project_topic_path(@project, topic), class: "mr-1" do %>
                        <%= svg 'edit' %>
                      <% end %>
                      <%= link_to project_topic_path(@project, topic), method: :delete do %>
                        <%= svg 'delete' %>
                      <% end %>
                    </div>
                  <% end %>
                </div>
              </div>
              <div class="card-body overflow-auto">
                <%= render :partial => 'messages/index', :locals => { :project => @project, :topic => topic, :messages => Message.list(topic, current_user.id) } %>
              </div>
              <div class="card-footer pb-0">
                <%= render :partial => 'messages/new', :locals => { :project => @project, :topic => topic, :message => topic.messages.build } %>
              </div>
            </div>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>
